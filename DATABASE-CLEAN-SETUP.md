# 🗑️ إعداد قاعدة البيانات النظيفة

## المشكلة
```
ERROR: 42P07: relation "audit_logs" already exists
```

هذا الخطأ يحدث لأن الجداول موجودة بالفعل في قاعدة البيانات.

## الحلول المتاحة

### الحل الأول: حذف شامل وإعادة بناء (مستحسن)
1. **افتح Supabase SQL Editor**
2. **انسخ محتوى ملف `clean-database-setup.sql`**
3. **اضغط "Run"**
4. **انتظر حتى تظهر رسائل النجاح**

### الحل الثاني: حذف الجداول فقط ثم إعادة البناء
1. **انسخ محتوى ملف `clean-existing-tables.sql`**
2. **اضغط "Run"**
3. **ثم انسخ محتوى ملف `clean-database-setup.sql`**
4. **اضغط "Run" مرة أخرى**

### الحل الثالث: حذف يدوي
إذا لم تعمل الحلول السابقة، يمكنك حذف الجداول يدوياً:

```sql
-- حذف الجداول بالترتيب الصحيح
DROP TABLE IF EXISTS audit_logs CASCADE;
DROP TABLE IF EXISTS warranties CASCADE;
DROP TABLE IF EXISTS customers CASCADE;
DROP TABLE IF EXISTS products CASCADE;
DROP TABLE IF EXISTS user_profiles CASCADE;
```

ثم استخدم `clean-database-setup.sql` لإعادة البناء.

## التحقق من النجاح
بعد تنفيذ أي من الحلول، يجب أن ترى:
- ✅ رسائل النجاح في النهاية
- ✅ 12 منتج افتراضي
- ✅ 5 جداول
- ✅ سياسات أمنية
- ✅ Views

## ملاحظات مهمة
- ⚠️ **هذا سيحذف جميع البيانات الموجودة**
- 🔄 **احتفظ بنسخة احتياطية إذا كان لديك بيانات مهمة**
- 🚀 **بعد التنفيذ، يمكنك اختبار التطبيق**

## استكشاف الأخطاء
إذا واجهت مشاكل:
1. تأكد من تنفيذ الكود في **SQL Editor** وليس في **Table Editor**
2. تحقق من رسائل الخطأ في Console
3. تأكد من أن لديك صلاحيات إدارية في Supabase
4. جرب الحلول بالترتيب المذكور أعلاه
