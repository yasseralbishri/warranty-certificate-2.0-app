# ุฏููู ุฅุตูุงุญ ูุดููุฉ ุชุณุฌูู ุงูุฎุฑูุฌ ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ

ุชู ุฅุตูุงุญ ูุดููุฉ ุชุณุฌูู ุงูุฎุฑูุฌ ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ูู ุฎูุงู ุชุญุณูู ุฅุนุฏุงุฏุงุช Supabase Client.

## ๐ง ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1. ุฅุนุฏุงุฏุงุช Supabase Client ุงููุญุณูุฉ
```typescript
export const supabase = createClient(supabaseUrl, supabaseAnonKey, {
  auth: {
    // ุชูุนูู ุชุฌุฏูุฏ ุงูุฌูุณุฉ ุงูุชููุงุฆู
    autoRefreshToken: true,
    // ุญูุธ ุงูุฌูุณุฉ ูู localStorage
    persistSession: true,
    // ุงูุชุดุงู ุงูุฌูุณุฉ ูู URL (ูู OAuth)
    detectSessionInUrl: true,
    // ููุชุงุญ ุงูุชุฎุฒูู ููุฌูุณุฉ
    storageKey: 'sb-warranty-session',
    // ุชูููุฐ ุงูุชุฎุฒูู
    storage: typeof window !== 'undefined' ? window.localStorage : undefined,
    // ููุน ุงูุชุฏูู ูููุตุงุฏูุฉ
    flowType: 'pkce'
  },
  // ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ
  global: {
    headers: {
      'X-Client-Info': 'warranty-app'
    }
  }
})
```

### 2. ูุฑุงูุจุฉ Session Persistence
- ุฅุถุงูุฉ console.log ููุฑุงูุจุฉ localStorage
- ุชุชุจุน ุชุบููุฑุงุช ุงูุฌูุณุฉ
- ูุฑุงูุจุฉ ุฃุญุฏุงุซ ุงููุตุงุฏูุฉ

## ๐งช ููููุฉ ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ

### ุงูุฎุทูุฉ 1: ุชุณุฌูู ุงูุฏุฎูู
1. ุงูุชุญ ุงูุชุทุจูู
2. ุณุฌู ุงูุฏุฎูู ุจุญุณุงุจู
3. ุชุฃูุฏ ูู ูุตููู ูููุญุฉ ุงูุชุญูู

### ุงูุฎุทูุฉ 2: ูุฑุงูุจุฉ Console
ุงูุชุญ Developer Tools (F12) ูุงูุชูู ุฅูู Console. ูุฌุจ ุฃู ุชุฑู:
```
๐ง [Supabase] ุฅุนุฏุงุฏ Supabase Client...
๐ง [Supabase] URL: https://...
๐ง [Supabase] Key: sb_publishable_...
๐ง [Supabase] Session Storage: localStorage ูุชุงุญ
๐ [useAuthState] ุจุฏุก hook ุญุงูุฉ ุงููุตุงุฏูุฉ...
๐ [useAuthState] ุงูุฌูุณุฉ ุงููุญููุธุฉ ูู localStorage: ููุฌูุฏุฉ
๐ [useAuthState] ุฌูุณุฉ ุงููุตุงุฏูุฉ: {session: {...}, sessionError: null}
โ [useAuthState] ุชู ุฌูุจ ููู ุงููุณุชุฎุฏู ุจูุฌุงุญ
```

### ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุฅุนุงุฏุฉ ุงูุชุญููู
1. **ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ** (ุงุถุบุท F5)
2. **ุฑุงูุจ Console** - ูุฌุจ ุฃู ุชุฑู:
```
๐ [useAuthState] ุจุฏุก hook ุญุงูุฉ ุงููุตุงุฏูุฉ...
๐ [useAuthState] ุงูุฌูุณุฉ ุงููุญููุธุฉ ูู localStorage: ููุฌูุฏุฉ
๐ [useAuthState] ุฌูุณุฉ ุงููุตุงุฏูุฉ: {session: {...}, sessionError: null}
โ [useAuthState] ุชู ุฌูุจ ููู ุงููุณุชุฎุฏู ุจูุฌุงุญ
```

### ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงููุชูุฌุฉ
- **ุฅุฐุง ุธูุฑุช ููุญุฉ ุงูุชุญูู ูุจุงุดุฑุฉ:** โ ุงููุดููุฉ ูุญูููุฉ
- **ุฅุฐุง ุธูุฑุช ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู:** โ ุงููุดููุฉ ูุง ุฒุงูุช ููุฌูุฏุฉ

## ๐ ุชุดุฎูุต ุงููุดุงูู

### ุงููุดููุฉ 1: localStorage ุบูุฑ ูุชุงุญ
```
๐ง [Supabase] Session Storage: localStorage ุบูุฑ ูุชุงุญ
```
**ุงูุญู:** ุชุฃูุฏ ูู ุชุดุบูู ุงูุชุทุจูู ูู ูุชุตูุญ ูููุณ ูู ุจูุฆุฉ Node.js

### ุงููุดููุฉ 2: ุงูุฌูุณุฉ ุบูุฑ ูุญููุธุฉ
```
๐ [useAuthState] ุงูุฌูุณุฉ ุงููุญููุธุฉ ูู localStorage: ุบูุฑ ููุฌูุฏุฉ
```
**ุงูุญู:** ุชุญูู ูู ุฅุนุฏุงุฏุงุช Supabase Auth ูู ููุญุฉ ุงูุชุญูู

### ุงููุดููุฉ 3: ุฎุทุฃ ูู ุงูุฌูุณุฉ
```
๐ฅ [useAuthState] ุฎุทุฃ ูู ุงูุฌูุณุฉ: {...}
```
**ุงูุญู:** ุชุญูู ูู ุตุญุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

## ๐๏ธ ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ

### ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

1. **ุชุญูู ูู Supabase Auth Settings:**
   - ุงุฐูุจ ุฅูู Supabase Dashboard
   - Authentication > Settings
   - ุชุฃูุฏ ูู ุชูุนูู "Enable email confirmations"
   - ุชุฃูุฏ ูู ุฅุนุฏุงุฏ "Site URL" ุจุดูู ุตุญูุญ

2. **ุชุญูู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ:**
   ```bash
   echo $VITE_SUPABASE_URL
   echo $VITE_SUPABASE_ANON_KEY
   ```

3. **ุงูุณุญ localStorage ูุฏููุงู:**
   ```javascript
   // ูู Console
   localStorage.removeItem('sb-warranty-session')
   localStorage.clear()
   ```

## ๐ Console Logs ุงููุชููุนุฉ

### ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู:
```
๐ [useAuthState] ุชุบููุฑ ูู ุญุงูุฉ ุงููุตุงุฏูุฉ: {event: 'SIGNED_IN', session: 'ููุฌูุฏุฉ', userId: '...'}
๐ [useAuthState] localStorage ุจุนุฏ ุงูุชุบููุฑ: ููุฌูุฏุฉ
```

### ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ:
```
๐ [useAuthState] ุจุฏุก hook ุญุงูุฉ ุงููุตุงุฏูุฉ...
๐ [useAuthState] ุงูุฌูุณุฉ ุงููุญููุธุฉ ูู localStorage: ููุฌูุฏุฉ
๐ [useAuthState] ุฌูุณุฉ ุงููุตุงุฏูุฉ: {session: {...}, sessionError: null}
โ [useAuthState] ุชู ุฌูุจ ููู ุงููุณุชุฎุฏู ุจูุฌุงุญ
```

### ุนูุฏ ุชุณุฌูู ุงูุฎุฑูุฌ:
```
๐ [useAuthState] ุชุบููุฑ ูู ุญุงูุฉ ุงููุตุงุฏูุฉ: {event: 'SIGNED_OUT', session: 'ุบูุฑ ููุฌูุฏุฉ', userId: 'ุบูุฑ ูุญุฏุฏ'}
๐ [useAuthState] localStorage ุจุนุฏ ุงูุชุบููุฑ: ุบูุฑ ููุฌูุฏุฉ
๐ญ [useAuthState] ุชุณุฌูู ุฎุฑูุฌ ุงููุณุชุฎุฏู
```

## ๐ฏ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

- โ **ูุง ุชุณุฌูู ุฎุฑูุฌ** ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
- โ **ุญูุธ ุงูุฌูุณุฉ** ูู localStorage
- โ **ุชุฌุฏูุฏ ุชููุงุฆู** ููุฌูุณุฉ
- โ **ุงุณุชูุฑุงุฑูุฉ ุงููุตุงุฏูุฉ** ุนุจุฑ ุงูุฌูุณุงุช

## ๐งน ุชูุธูู Console Logs

ุจุนุฏ ุงูุชุฃูุฏ ูู ุญู ุงููุดููุฉุ ููููู ุฅุฒุงูุฉ console.log:
1. ุงุจุญุซ ุนู `console.log('๐ง [Supabase]`
2. ุงุจุญุซ ุนู `console.log('๐ [useAuthState]`
3. ุงุญุฐู ุงูุฃุณุทุฑ ุบูุฑ ุงููุทููุจุฉ

---

**ุชู ุฅุตูุงุญ ูุดููุฉ ุชุณุฌูู ุงูุฎุฑูุฌ!** ๐
