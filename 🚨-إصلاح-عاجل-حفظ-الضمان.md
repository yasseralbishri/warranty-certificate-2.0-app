# ๐จ ุฅุตูุงุญ ุนุงุฌู - ุฎุทุฃ ุญูุธ ุงูุถูุงู

## ุงููุดููุฉ ุงูุญุงููุฉ
```
ุฎุทุฃ ูู ุญูุธ ุงูุถูุงู: Could not find the 'purchase_date' column of 'warranties' in the schema cache
```

## ุงูุญู ุงูุนุงุฌู

### ุงูุฎุทูุฉ 1: ุชุทุจูู ุงูุฅุตูุงุญ ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
1. ุงูุชุญ **Supabase Dashboard**
2. ุงุฐูุจ ุฅูู **SQL Editor**
3. ุงูุณุฎ ูุงูุตู ุงูููุฏ ุงูุชุงูู:

```sql
-- ุฅุตูุงุญ ุนุงุฌู ูุฎุทุฃ ุญูุธ ุงูุถูุงู
ALTER TABLE warranties 
ADD COLUMN IF NOT EXISTS purchase_date DATE,
ADD COLUMN IF NOT EXISTS warranty_number VARCHAR(255),
ADD COLUMN IF NOT EXISTS warranty_duration_months INTEGER;

-- ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
UPDATE warranties 
SET 
    purchase_date = warranty_start_date,
    warranty_number = CONCAT('W-', id::text),
    warranty_duration_months = EXTRACT(MONTH FROM AGE(warranty_end_date, warranty_start_date)) + 
                               EXTRACT(YEAR FROM AGE(warranty_end_date, warranty_start_date)) * 12
WHERE purchase_date IS NULL;

-- ุฌุนู ุงูุฃุนูุฏุฉ ุงููุทููุจุฉ NOT NULL
ALTER TABLE warranties 
ALTER COLUMN purchase_date SET NOT NULL,
ALTER COLUMN warranty_number SET NOT NULL,
ALTER COLUMN warranty_duration_months SET NOT NULL;

-- ุฅุถุงูุฉ ููุงุฑุณ ููุฃุฏุงุก
CREATE INDEX IF NOT EXISTS idx_warranties_purchase_date ON warranties(purchase_date);
CREATE INDEX IF NOT EXISTS idx_warranties_warranty_number ON warranties(warranty_number);
CREATE INDEX IF NOT EXISTS idx_warranties_duration ON warranties(warranty_duration_months);

-- ุฅุถุงูุฉ ูููุฏ ูุฑูุฏุฉ
ALTER TABLE warranties 
ADD CONSTRAINT IF NOT EXISTS unique_warranty_number UNIQUE (warranty_number);
```

4. ุงุถุบุท **Run** ูุชูููุฐ ุงูููุฏ

### ุงูุฎุทูุฉ 2: ุงูุชุญูู ูู ุงูุฅุตูุงุญ
ุจุนุฏ ุชุทุจูู ุงูุฅุตูุงุญุ ุฌุฑุจ ุญูุธ ุถูุงู ุฌุฏูุฏ. ูุฌุจ ุฃู ูุนูู ุจุฏูู ุฃุฎุทุงุก.

### ุงูุฎุทูุฉ 3: ุฅุฐุง ุงุณุชูุฑ ุงูุฎุทุฃ
ุฅุฐุง ุงุณุชูุฑ ุงูุฎุทุฃุ ุฌุฑุจ:
1. ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ (F5)
2. ูุณุญ cache ุงููุชุตูุญ
3. ุชุณุฌูู ุงูุฎุฑูุฌ ูุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู

## ุงูุฃุนูุฏุฉ ุงููุถุงูุฉ
- โ `purchase_date` - ุชุงุฑูุฎ ุงูุดุฑุงุก
- โ `warranty_number` - ุฑูู ุงูุถูุงู ุงููุฑูุฏ  
- โ `warranty_duration_months` - ูุฏุฉ ุงูุถูุงู ุจุงูุฃุดูุฑ

## ุงููุชูุฌุฉ ุงููุชููุนุฉ
๐ **ุชู ุฅุตูุงุญ ุฎุทุฃ ุญูุธ ุงูุถูุงู**
๐ **ูููู ุงูุขู ุญูุธ ุงูุถูุงูุงุช ุจุฏูู ุฃุฎุทุงุก**
๐ **ุชู ุชุญุณูู ุงูุฃุฏุงุก ูุน ุงูููุงุฑุณ ุงูุฌุฏูุฏุฉ**

---
**ููุงุญุธุฉ**: ูุฐุง ุงูุฅุตูุงุญ ุขูู ููุง ูุคุซุฑ ุนูู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ.
